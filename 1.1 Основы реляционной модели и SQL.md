### Основные понятия реляционных баз данных
Реляционная модель была разработана в конце 1960-х годов Е.Ф.Коддом . Она определяет способ представления данных (структуру данных), методы защиты данных (целостность данных), и операции, которые можно выполнять с данными (манипулирование данными). Эта модель лежит в основе всех реляционных баз данных до настоящего времени.

Основные принципы реляционных баз данных:

все данные на концептуальном уровне представляются в виде объектов, заданных в виде строк и столбцов, называемых отношением, более распространенное название – таблица;
в пересечение строки и столбца таблицы можно занести только одно значение;
все операции выполняются над целыми отношениями и результатом этих операций является отношение.
Пример отношения: 

![30](/images/30.png)                         

На примере таблицы Сотрудник рассмотрим терминологию реляционных баз данных:

отношение  – это структура данных целиком, набор записей (в обычном понимании – таблица) , в  примере –это Сотрудник;
кортеж – это каждая строка , содержащая данные (более распространенный термин – запись ), например, <001, Борин С.А, 234-01-23, программист>, все кортежи в отношении должны быть различны;
мощность – число кортежей в таблице (проще говоря, число записей), в данном случае 3, мощность отношения может быть любой (от 0 до бесконечности), порядок следования кортежей - неважен;
атрибут – это столбец в таблице (более распространенный термин – поле ), в примере – Табельный номер, Фамилия И.О., Телефон, Должность) 
размерность – это число атрибутов в таблице, в данном случае – 4;
размерность отношения должна быть больше 0, порядок следования атрибутов существенен;
домен атрибута – это допустимые значения (неповторяющиеся), которые можно занести в поле , например для атрибута Должность домен – {инженер, программист}.

### Типы данных для полей 

![31](/images/31.png)

### Задание 1
Сформулируйте SQL запрос для создания таблицы book, занесите  его в окно кода и отправьте на проверку. 

### Решение 1: 

``` 
CREATE TABLE book(

    book_id INT PRIMARY KEY AUTO_INCREMENT,

    title VARCHAR(50),

    author VARCHAR(30),

    price DECIMAL(8, 2),

    amount INT
); 
```


### Задание 2

Занесите новую строку в таблицу book (текстовые значения (тип VARCHAR) заключать либо в двойные, либо в одинарные кавычки):

### Решение 2

``` 
INSERT INTO book (title, author, price, amount)   

    VALUES ('Мастер и Маргарита', 'Булгаков М.А.', 670.99, 3); 
```

### Задание 3

Занесите три последние записи в таблицу book,  первая запись уже добавлена на предыдущем шаге

### Решение 3

```
INSERT INTO book (title, author, price, amount)

    VALUES ('Белая гвардия', 'Булгаков М.А.', 540.50, 5);

INSERT INTO book (title, author, price, amount)

    VALUES ('Идиот', 'Достоевский Ф.М.', 460.00, 10);

INSERT INTO book (title, author, price, amount)

     VALUES ('Братья Карамазовы', 'Достоевский Ф.М.', 799.01, 2); 
```

### Выборка отдельных столбцов

### Задание 4

Выбрать авторов, название книг и их цену из таблицы book.

### Решение 4

```
SELECT author, title, price FROM book
``````

### Присвоение новых имен столбцам при формировании выборки

### Задание 5

Выбрать названия книг и авторов из таблицы book, для поля title задать имя(псевдоним) Название, для поля author –  Автор. 

### Решение 5

```
SELECT title AS Название, author AS Автор
FROM book
```

### Выборка данных с созданием вычисляемого столбца

### Задание 6

Для упаковки каждой книги требуется один лист бумаги, цена которого 1 рубль 65 копеек. Посчитать стоимость упаковки для каждой книги (сколько денег потребуется, чтобы упаковать все экземпляры книги). В запросе вывести название книги, ее количество и стоимость упаковки, последний столбец назвать pack. 

### Решение 6

```
SELECT title, amount, 
     amount * 1.65 AS pack
FROM book;
```

### Задание 7

В конце года цену всех книг на складе пересчитывают – снижают ее на 30%. Написать SQL запрос, который из таблицы book выбирает названия, авторов, количества и вычисляет новые цены книг. Столбец с новой ценой назвать new_price, цену округлить до 2-х знаков после запятой.

### Решение 7

```
SELECT title, 
    author, 
    amount,
    ROUND((price*70/100),2) AS new_price 
FROM book;
```

### Задание 8

При анализе продаж книг выяснилось, что наибольшей популярностью пользуются книги Михаила Булгакова, на втором месте книги Сергея Есенина. Исходя из этого решили поднять цену книг Булгакова на 10%, а цену книг Есенина - на 5%. Написать запрос, куда включить автора, название книги и новую цену, последний столбец назвать new_price. Значение округлить до двух знаков после запятой.

### Решение 8

```
SELECT author, title,
ROUND(IF(author = 'Булгаков М.А.', price * 1.1, IF(author = 'Есенин С.А.', price * 1.05, price)), 2) AS new_price
FROM book;
```

### Выборка данных по условию

### Задание 9

Вывести автора, название  и цены тех книг, количество которых меньше 10.

### Решение 9

```
SELECT author, title, price
FROM book
WHERE amount < 10;
``````
### Задание 10
Вывести название, автора,  цену  и количество всех книг, цена которых меньше 500 или больше 600, а стоимость всех экземпляров этих книг больше или равна 5000.
```
SELECT title, author, price, amount 
FROM book
WHERE (price < 500 OR price > 600) AND price * amount >= 5000;
```

### Выборка данных, операторы BETWEEN, IN

### Задание 11
Вывести название и авторов тех книг, цены которых принадлежат интервалу от 540.50 до 800 (включая границы),  а количество или 2, или 3, или 5, или 7 .

### Решение 11
```
SELECT title, author 
FROM book
WHERE price BETWEEN 540.50 AND 800 AND amount IN(2, 3, 5, 7);
```
### Выборка данных с сортировкой

### Задание 12
Вывести  автора и название  книг, количество которых принадлежит интервалу от 2 до 14 (включая границы). Информацию  отсортировать сначала по авторам (в обратном алфавитном порядке), а затем по названиям книг (по алфавиту).

### Решение 12
```
SELECT author, title
FROM book
WHERE amount BETWEEN 2 AND 14
ORDER BY author DESC, title;
```
### Выборка данных, оператор LIKE
### Задание 13
Вывести название и автора тех книг, название которых состоит из двух и более слов, а инициалы автора содержат букву «С». Считать, что в названии слова отделяются друг от друга пробелами и не содержат знаков препинания, между фамилией автора и инициалами обязателен пробел, инициалы записываются без пробела в формате: буква, точка, буква, точка. Информацию отсортировать по названию книги в алфавитном порядке.
### Решение 13
```
SELECT title, author 
FROM book
WHERE author LIKE '%_С.%'
AND title LIKE '_% %'
ORDER BY title;
```
### Задание 14
Вывести название книг, состоящих ровно из 5 букв.
### Решение 14
```
SELECT title FROM book 
WHERE title LIKE "_____"
```
### Задание 15
Вывести книги, название которых длиннее 5 символов

### Решение 15
```
SELECT title FROM book 
WHERE title LIKE "______%";
/* эквивалентные условия 
title LIKE "%______"
title LIKE "%______%"
*/
```